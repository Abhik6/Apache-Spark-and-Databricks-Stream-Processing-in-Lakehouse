Welcome Back.

In this lecture, we will start our design discussion.

Let me show you the current state of the system.

Here it is.

This is the current state of our system, and we will design an end-to-end solution for our analytical use cases.

Let's start with the step one.

The first step is to design a lakehouse platform.

We want to use Databricks Cloud for this project,

so we will design a Lakehouse environment using the Databricks Cloud.

A lakehouse needs storage for your data.

Storage design for your lakehouse is one of the most critical parts.

So let's start designing our storage layer first.

At the bottom of the lakehouse, we have a storage layer.

We will design the storage layer using Azure ADLS Gen2 cloud storage.

So all our data and metadata will be stored in the ADLS Gen2 cloud storage.

Choosing ADLS Gives us the following advantages.

Azure ADLS Gen2 is compatible with many analytical systems, including Spark and delta lake.

It is excellent storage that is available at a low cost

and optimized for performance when used by distributed processing systems.

You can scale your storage according to your requirement and store hundreds of terabytes of data.

Yet, you pay as you grow.

Azure Storage provides fine-grained control over who has access to your data,

and all data written to an Azure storage account is encrypted.

ADLS provides redundancy to ensure your data is safe during hardware failures.

You can also opt to replicate data across data centers for additional protection from natural disasters.

Last, You can access ADLS Gen2 like a directory structure.

It is a blob storage behind the scene, but you can access it like a file system and create directories and files.

Great!

We will be using Azure ADLS Gen2 storage.

But we cannot have one ADLS Gen2 container and dump everything into a single directory.

We must plan our storage layer design.

Here is a proposal.

We want to create three storage containers to separate the things.

The first storage container will be named sbit-metastore-root, and we will use it to store all our project metadata.

The second container is named sbit-managed-dev,

and we will use this to store all our databases and managed tables.

What does it mean?

All our delta tables will be stored inside this container.

We will also create a third container for external unmanaged datasets.

The name of this container is sbit-unmanaged-dev.

That's a top-level storage container design.

We can have data directories inside the container.

So let me elaborate on it with some proposed directories.

Here it is.

We will use sbit-metastore-root to store all the metadata for this project.

The metastore is shared across all environments.

So we can have one metastore container for the entire project, and a subdirectory structure is not required.

The sbit-managed-dev is dedicated to the dev environment databases and tables.

However, we want to follow Medalion architecture, so we will also have bronze, silver, and gold subdirectories.

Finally, we will have an unmanaged data container.

And we create two base directories inside this container.

The first one is data-zone, and the second one is for checkpoints.

And that completes our storage for the lakehouse.

Now you know these two containers and directories are for the development environment.

You can follow a similar design for the test and production environment.

And we can implement all three environments.

But remember, we are keeping a single metastore for all three environments.

A single metastore allows you to centralize metadata management for the entire project.

And we can keep the data in separate containers.

That's all for the storage layer.

Update these into the architecture diagram, and it looks like this.

We have a raw data zone, checkpoint zone, bronze, silver, and gold layer storage.

All of these are nothing but root directories under an appropriate storage container.

Correct?

Let's take it to the next level.

We can create three databases on top of the bronze, silver, and gold layer storage.

I will store all my bronze layer tables in the bronze database.

And all the bronze database tables will store data in the bronze layer directory.

Similarly, silver-layer and gold-layer databases will store their table data in their respective directories.

And that completes our data storage design.

In this architecture, my data is automatically encrypted by ADLS Gen2,

which also protects me from hardware failures.

I can enable ADLS replication, so an automatic backup is also taken care of by the ADLS.

So all the data protection-related requirements,

such as durability, high availability, and encryption, are taken care of by the ADLS.

And that's all for this lecture.

I will see you in the following lecture and take you to the next layer.

Keep Learning and Keep growing.
