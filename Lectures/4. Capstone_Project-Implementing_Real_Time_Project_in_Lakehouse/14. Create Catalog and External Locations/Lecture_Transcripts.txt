Welcome back.

This lecture will teach us to set up our data directory locations and metadata catalog.

But before that, let me show you our storage design.

Here it is.

So we plan to create three storage containers.

The first one should be used for unity catalog metadata.

And we already defined the unity catalog Metastore at this location in the earlier lecture.

Now we also have two more containers we want to set up The first one as our managed table container.

The second one must be used for unmanaged tables or storing data files.

So let's configure them.

Start a browser window and log in to the workspace.

Come to the catalog menu.

And you will see the catalog Explorer.

You can also see external data at the bottom.

Click that.

Now come to external locations.

We do not want our managed and unmanaged datasets stored inside the Unity Catalog's default container.

So we will be creating two external containers here.

Now click the Create Location button.

Give a name to your location.

Choose a storage credential.

It should have been automatically created when we configured the Unity catalog.

Great.

The next step is to type the storage container URL.

You can see the hint text for the format.

It should be made from your container name and storage account name.

I've already created one for my project, so let me paste it.

So I want to map the managed dev to the managed location name.

That's all.

Hit the create button.

Good.

So we created it.

The managed location is where I want to store all our managed tables.

How do I configure that?

Simple.

We will create our catalog at this location.

Once we have a catalog at this location, all databases and tables in this catalog will land in this

location.

Let's create the catalog also.

Click the catalog in the Explorer.

You might see some existing catalogs, but we do not want to use any of these.

The Hive Metastore is a workspace local catalog.

It is not linked with the Unity catalog and has no centralized access control and we do not want to

use the hive Metastore for our project work.

The sample catalog is created by Databricks and you can ignore it.

The system catalog contains an information schema metadata about your catalogs, so we cannot use this

one for the project work.

You may also see an auto created catalog when you set up your meta store.

You can leave all these existing catalogs aside and create a new catalog for your project.

Let's create a new catalog.

Click the Create Catalog button.

Give a name to your catalog.

Make sure the catalog type is standard.

Choose the storage location.

We just created the bit managed location.

So choose that one.

That's all.

Hit the create button.

Great.

So I created a dev catalog for my development team.

Once you have a catalog, you can create a schema or a database in the Unity catalog.

A schema and databases are synonyms.

They refer to a database or a schema for the same thing.

But I'm not going to create a schema.

I'll leave it for the development team to create databases, tables and other objects.

We just set up the catalog and leave it there for the project team.

We also need to grant permissions on the catalog to the development team.

Go to the Permissions tab and click Grant.

Type as with dove in the principles.

Now grant them all privileges.

You can give selective privileges as desired, but for simplicity, let's grant all privileges.

That's all we are done setting up the location and a catalog for managed tables.

What about unmanaged tables, data files and checkpoints?

Let's create some external locations for them.

Click the external data once again.

Now go to the external locations.

We want to create two external locations datazone and checkpoint.

And both of these locations must be defined under the unmanaged dev container.

So let's start doing it.

Hit the Create Locations button.

Give a name to your external location.

Select a storage credential.

Now we need to give the storage container URL.

You already learned about the format.

It must be defined in the format shown here.

So let me paste the URL.

Looks good.

Correct.

I want to map the unmanaged dev container for the data zone, but we also want to create a checkpoint

directory in the same container.

So let me add some extra directory names inside the container.

Here is the new URL.

Great.

So we want to keep data files inside the data directory in this unmanaged dev container.

We will also create a checkpoint sub directory to keep all the checkpoint files in the same container

and we will do that in the next step.

For now, let me hit the create button and finish this.

Great.

So we created Datazone.

Now let me create a new location for the checkpoint.

Hit the Create Locations button.

Give a name to your external location.

Select a storage credential.

Now we want to give the storage container URL and I want to map the unmanaged dev container once again,

but we already mapped the same container for the data zone.

So I will create a checkpoint sub directory inside the container to reuse the container and also keep

things separate.

Let me paste the URL.

Looks good.

Correct.

Hit the create button and finish it.

Great.

We defined two locations.

We will be using these locations in our project.

Basically, I'll keep my test data files in the data zone and I will use the checkpoint directory to

create checkpoints for my streaming jobs.

We also need to grant permissions for these directories.

So let me do that also.

Click the data zone location.

You can see the grant button in the permissions tab.

Hit the grant button.

Type as dev in the principles.

Now grant all privileges.

You can give selective privileges, but let's grant all for the simplicity.

Now come back to external locations once again, repeat the same for the checkpoint location.

Click the checkpoint locations.

Click the grant button.

Now.

Grant all permissions to the dev.

Hit the ground button and you are done.

That's all.

We finished creating a storage layer for our lake house, and we also assigned appropriate permissions.

With this structure, you are ready with a development environment, and your team can start working

on the project.

That's all for this lecture.

See you again.

Keep learning and keep growing.
