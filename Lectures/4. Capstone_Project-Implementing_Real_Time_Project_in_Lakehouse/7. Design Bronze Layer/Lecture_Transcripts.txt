Welcome back.

So far, we finished the data ingestion design for our project.

Let me show you the current state of the solution.

Here it is.

We are ingesting all five data sets to the data zone.

Let me rearrange this diagram to represent it appropriately.

Great.

Now it looks better.

So we are ingesting data into data zone subdirectories.

User registration and login/logout are ingested in their respective landing zone directories.

All three Kafka data sets will land in a Kafka directory.

Now we are ready to design our lakehouse.

So let's talk about it.

We want to follow a lakehouse medallion architecture.

Right?

So the first step in implementing Medalion architecture is to build your bronze layer.

Let me add some bronze layer tables and design the data flow.

Here it is.

So we will create three tables.

The first table is to store raw data about user and device registration.

And we will write a Spark data processing pipeline to read new data from the reg-user landing zone

and load it into the bronze layer table.

Similarly, we need a job to read data from the gym log and insert it into the bronze table.

The following requirement is to ingest Kafka topic data into the bronze table.

However, we have three Kafka data sets.

So in a typical case, you should write three Spark jobs to ingest the three data sets.

That's what we are showing here in the diagram.

But we can also optimize it to do with a single job.

Let me update the design.

Here it is.

We recommend creating only one Spark job to load all three Kafka data sets to a single table.

And this approach of loading a Kafka data set is known as creating a Kafka multiplex table.

Kafka topic data is a key/value pair.

So all the topics of Kafka have the same schema:

topic name,

timestamp,

key, and value.

Correct?

So it is easy and convenient to load multiple Kafka topics into a single table.

And that's what we are doing here.

We will create only one Spark Job and a single bronze table to load multiple Kafka topics.

This approach reduces the number of jobs and also reduces the management overhead.

Great!

That's all about the bronze layer design.

In this requirement, we have only five data sets.

So we are loading all five data sets to our bronze layer tables.

But the design remains the same even if you have a hundred data sets.

We load and collect all the raw data in the bronze layer.

Remember one rule.

The bronze layer is the raw data.

So we do not modify or remove duplicates in the bronze layer.

It is as simple as copying the data from the landing zone to the bronze layer table.

Great!

That's all for this lecture.

See you again.

Keep Learning and Keep Growing.
